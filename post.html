<!DOCTYPE html>
<html class="light dark" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Blog Post - Clinical Psychology</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700,0..1&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
<script id="tailwind-config">
    tailwind.config = {
        darkMode: "class",
        theme: {
            extend: {
                colors: {
                    "primary": "#135bec",
                    "background-light": "#f6f6f8",
                    "background-dark": "#101622",
                },
                fontFamily: {
                    "display": ["Lexend", "sans-serif"]
                },
                borderRadius: {
                    "DEFAULT": "0.25rem",
                    "lg": "0.5rem",
                    "xl": "0.75rem",
                    "full": "9999px"
                },
            },
        },
    }
</script>
<style>
    .material-symbols-outlined {
        font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }
    .filled-icon {
        font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    }
    body {
        min-height: max(884px, 100dvh);
    }
    /* Markdown content styling */
    .markdown-content {
        @apply text-[#0d121b] dark:text-white;
    }
    .markdown-content h1 {
        @apply text-3xl font-bold mt-8 mb-4;
    }
    .markdown-content h2 {
        @apply text-2xl font-bold mt-6 mb-3;
    }
    .markdown-content h3 {
        @apply text-xl font-bold mt-4 mb-2;
    }
    .markdown-content p {
        @apply mb-4 leading-relaxed;
    }
    .markdown-content ul, .markdown-content ol {
        @apply mb-4 ml-6;
    }
    .markdown-content li {
        @apply mb-2;
    }
    .markdown-content code {
        @apply bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-sm;
    }
    .markdown-content pre {
        @apply bg-gray-100 dark:bg-gray-800 p-4 rounded-xl overflow-x-auto mb-4;
    }
    .markdown-content blockquote {
        @apply border-l-4 border-primary pl-4 italic my-4 text-gray-600 dark:text-gray-400;
    }
    .markdown-content a {
        @apply text-primary underline;
    }
    .markdown-content img {
        @apply rounded-xl my-4 w-full;
    }
</style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-[#0d121b] dark:text-white">
<div class="relative flex min-h-screen w-full flex-col overflow-x-hidden">
<!-- TopAppBar -->
<header class="sticky top-0 z-10 flex items-center bg-white/80 dark:bg-background-dark/80 backdrop-blur-md p-4 pb-2 justify-between border-b border-[#e7ebf3] dark:border-gray-800">
    <div class="text-[#0d121b] dark:text-white flex size-10 items-center justify-center">
        <a href="blog.html" class="flex items-center justify-center rounded-lg h-10 w-10 bg-transparent text-[#0d121b] dark:text-white">
            <span class="material-symbols-outlined text-2xl">arrow_back_ios</span>
        </a>
    </div>
    <h2 class="text-[#0d121b] dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center">Article</h2>
    <div class="flex size-10 items-center justify-end">
        <button onclick="toggleDarkMode()" class="flex items-center justify-center rounded-lg h-10 w-10 bg-transparent text-[#0d121b] dark:text-white">
            <span class="material-symbols-outlined text-2xl" id="darkModeIcon">dark_mode</span>
        </button>
    </div>
</header>

<main class="flex-1 pb-24">
<div id="postContent" class="px-4 pt-6 max-w-3xl mx-auto">
    <div class="text-center py-8">
        <p class="text-gray-500 dark:text-gray-400">Loading post...</p>
    </div>
</div>
</main>

<!-- BottomNavBar -->
<nav class="fixed bottom-0 left-0 right-0 z-20 bg-white/90 dark:bg-background-dark/90 backdrop-blur-md border-t border-[#e7ebf3] dark:border-gray-800 px-4 pb-6 pt-2">
    <div class="flex justify-between items-center max-w-md mx-auto">
        <a class="flex flex-col items-center gap-1 text-gray-400" href="index.html">
            <span class="material-symbols-outlined text-2xl">home</span>
            <p class="text-[10px] font-medium">Home</p>
        </a>
        <a class="flex flex-col items-center gap-1 text-gray-400" href="blog.html">
            <span class="material-symbols-outlined text-2xl">book_4</span>
            <p class="text-[10px] font-medium">Resources</p>
        </a>
        <a class="flex flex-col items-center gap-1 text-gray-400" href="contact.html">
            <span class="material-symbols-outlined text-2xl">mail</span>
            <p class="text-[10px] font-medium">Contact</p>
        </a>
        <a class="flex flex-col items-center gap-1 text-gray-400" href="contact.html">
            <span class="material-symbols-outlined text-2xl">medical_services</span>
            <p class="text-[10px] font-medium">Services</p>
        </a>
    </div>
</nav>
</div>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="js/utils.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        initDarkMode();
        loadPost();
    });

    async function loadPost() {
        const urlParams = new URLSearchParams(window.location.search);
        const filename = urlParams.get('file');
        
        if (!filename) {
            document.getElementById('postContent').innerHTML = '<p class="text-red-500 text-center py-8">Post not found.</p>';
            return;
        }

        try {
            const response = await fetch(`posts/${filename}`);
            if (!response.ok) {
                throw new Error('Post not found');
            }
            
            const markdown = await response.text();
            const postData = parsePostFrontmatter(markdown);
            const html = marked.parse(postData.content);
            
            document.title = `${postData.title || 'Blog Post'} - Clinical Psychology`;
            
            document.getElementById('postContent').innerHTML = `
                <article class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6 mb-6">
                    ${postData.image ? `<img src="${postData.image}" alt="${postData.title}" class="w-full rounded-xl mb-6"/>` : ''}
                    <div class="mb-4">
                        <span class="inline-block bg-primary/10 text-primary text-[10px] font-bold uppercase tracking-wider px-3 py-1 rounded mb-3">${postData.category || 'Article'}</span>
                        <h1 class="text-3xl font-bold mb-3 text-[#0d121b] dark:text-white">${postData.title || 'Untitled'}</h1>
                        ${postData.excerpt ? `<p class="text-lg text-gray-600 dark:text-gray-400 mb-4">${postData.excerpt}</p>` : ''}
                        <div class="flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400">
                            ${postData.date ? `<span>${new Date(postData.date).toLocaleDateString()}</span>` : ''}
                            ${postData.readTime ? `<span class="flex items-center gap-1"><span class="material-symbols-outlined text-sm">schedule</span>${postData.readTime} min read</span>` : ''}
                        </div>
                    </div>
                    <div class="markdown-content prose prose-lg max-w-none">
                        ${html}
                    </div>
                </article>
            `;
        } catch (error) {
            console.error('Error loading post:', error);
            document.getElementById('postContent').innerHTML = '<p class="text-red-500 text-center py-8">Error loading post. Please try again later.</p>';
        }
    }

    function parsePostFrontmatter(markdown) {
        const frontmatterRegex = /^---\s*\n([\s\S]*?)\n---\s*\n([\s\S]*)$/;
        const match = markdown.match(frontmatterRegex);
        
        if (!match) {
            return { content: markdown, title: null };
        }
        
        const frontmatter = match[1];
        const content = match[2];
        const metadata = {};
        
        frontmatter.split('\n').forEach(line => {
            const colonIndex = line.indexOf(':');
            if (colonIndex > 0) {
                const key = line.substring(0, colonIndex).trim();
                const value = line.substring(colonIndex + 1).trim().replace(/^["']|["']$/g, '');
                metadata[key] = value;
            }
        });
        
        return { ...metadata, content };
    }
</script>
</body>
</html>

